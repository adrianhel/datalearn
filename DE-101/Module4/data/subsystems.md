### 4.4 ETL подсистемы

#### [Назад в Модуль 4 ⤶](/DE-101/Module4/readme.md)

Согласно [подходу](https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/etl-architecture-34-subsystems/) 
Ральфа Кимбалла, процесс ETL включает 34 подсистемы в 4 группах:

### 4.4.1 Извлечение данных (Data Extracting)
**3 подсистемы** сосредоточены на извлечении данных из исходных систем.

> Начальные подсистемы взаимодействуют с исходными системами для получения доступа к необходимым данным.

**Подсистема 1**: ***Качество данных – профилирование данных (Data Quality – Data Profiling)*** — изучение источника 
данных для определения его пригодности в качестве источника и связанных с этим требований к очистке и соответствию.

**Подсистема 2**: ***Сбор данных об изменениях (Change Data Capture)*** — изолирует изменения, произошедшие в исходной 
системе, чтобы снизить нагрузку на ETL-обработку.

**Подсистема 3**: ***Система извлечения данных (Extract System)*** — извлекает и перемещает исходные данные в среду 
Хранилища данных для дальнейшей обработки.

### 4.4.2 Очистка и приведение в соответствие данных (Cleaning and Conforming Data)
**5 подсистем** обеспечивают дополнительную очистку и согласованность, включая размерные структуры для отслеживания 
ошибок качества данных.

> Эти критически важные этапы — то, что система ETL делает с данными.
> Подсистемы очистки и приведения в соответствие изменяют данные и повышают их ценность для организации.

**Подсистема 4**: ***Система очистки данных (Data Cleansing System)*** — реализует процессы контроля качества данных 
для выявления нарушений.

**Подсистема 5**: ***Отслеживание событий, связанных с ошибками (Error Event Tracking)*** — фиксирует все события, 
связанные с ошибками, которые являются важным фактором для улучшения качества данных.

**Подсистема 6**: ***Создание измерения для аудита (Audit Dimension Creation)*** — добавляет метаданные к каждой 
таблице фактов в качестве измерения.

**Подсистема 7**: ***Удаление дубликатов (Deduplication)*** — устраняет избыточные элементы основных измерений, 
таких как клиенты или продукты.

**Подсистема 8**: ***Качество данных — метрики (Data Quality – Metrics)*** — обеспечивает использование общих атрибутов 
измерений в согласованных основных измерениях и общих метрик в связанных таблицах фактов.

### 4.4.3 Предоставление данных для презентации (Delivering Data for Presentation)
**13 подсистем** передают данные в виде размерных структур на конечный уровень.

> Основная задача системы ETL — передача измерений и таблиц фактов на этапе доставки.
> Многие из этих подсистем ориентированы на обработку таблиц измерений.

**Подсистема 9**: ***Моделирование многомерных данных — медленно изменяющиеся измерения 
(Dimensional Data Modeling - SCD)*** — реализует логику для медленно изменяющихся атрибутов 
измерений.

> _**SCD** от **S**lowly **C**hanging **D**imensions_ — медленно изменяющиеся измерения.

**Подсистема 10**: ***Генератор суррогатных ключей (Surrogate Key Generator)*** — создает суррогатные ключи независимо 
для каждого измерения.

**Подсистема 11**: ***Менеджер иерархии (Hierarchy Manager)*** — обеспечивает одновременное создание нескольких 
вложенных иерархических структур в одном измерении.

**Подсистема 12**: ***Менеджер измерений (Special Dimensions Manager)*** — создает в архитектуре ETL заполнители для 
повторяющихся процессов, поддерживающих специфические характеристики размерного проектирования организации, включая 
стандартные конструкции размерного проектирования, такие как дополнительные размеры, мини-размеры и теги поведения.

**Подсистема 13**: ***Конструктор таблиц фактов (Fact Table Builders)*** — создание трех основных типов таблиц фактов: 
на уровне транзакций, на периодической основе и на основе накапливаемых данных.

**Подсистема 14**: ***Конвейер суррогатных ключей (Surrogate Key Pipeline)*** — заменяет операционные естественные ключи 
во входящей записи таблицы фактов соответствующими суррогатными ключами измерений.

**Подсистема 15**: ***Конструктор таблиц-мостов (Multi-Valued Bridge Table Builder)*** — создает и поддерживает таблицы 
мостов для поддержки многозначных отношений (многие ко многим).

**Подсистема 16**: ***Обработчик данных, поступающих с опозданием (Late Arriving Data Handler)*** — применяет 
специальные модификации к стандартным процедурам обработки для работы с данными, поступающими с задержкой.

**Подсистема 17**: ***Менеджер измерений (Dimension Manager)*** — централизованный орган, который подготавливает и 
публикует согласованные измерения для сообщества пользователей Хранилища данных.

**Подсистема 18**: ***Поставщик таблиц фактов (Provider Fact Table)*** — отвечает за администрирование одной или 
нескольких таблиц фактов и за их создание, поддержку и использование.

**Подсистема 19**: ***Конструктор аггрегаций (Aggregate Builder)*** — создает и поддерживает агрегаты, которые можно 
легко использовать с технологиями агрегатной навигации для повышения производительности запросов.

**Подсистема 20**: ***Конструктор OLAP кубов (OLAP Cube Builder)*** — загружает данные из реляционной многомерной схемы 
для заполнения кубов OLAP.

**Подсистема 21**: ***Менеджер распространения данных (Data Propagation Manager)*** — подготавливает согласованные, 
интегрированные данные с сервера представления хранилища данных для передачи в другие среды для специальных целей.

### 4.4.4 Управление и мониторинг компонентов ETL (Managing the ETL environment)    
**13 подсистем** помогают управлять производственной средой ETL.

> Система ETL должна постоянно работать над выполнением трех критериев:
>
> - **Надежность**. 
> 
> _Процессы ETL должны работать стабильно, чтобы своевременно предоставлять достоверные данные на любом 
уровне детализации._
> - **Доступность**.
> 
> _Хранилище данных должно соответствовать соглашениям об уровне обслуживания. Хранилище должно быть 
работоспособным и доступным, как и было обещано._
> - **Управляемость**.
> 
> _Успешное Хранилище данных никогда не бывает завершенным; оно постоянно растет и меняется вместе 
с бизнесом. Таким образом, процессы ETL также должны развиваться._
>
> Подсистемы управления ETL являются ключевыми архитектурными компонентами, которые помогают достичь целей в области надёжности, доступности и управляемости.

**Подсистема 22**: ***Планировщик заданий (Job Scheduler)*** — надежно управляет стратегией выполнения ETL, включая 
взаимосвязи и зависимости между заданиями ETL.

**Подсистема 23**: ***Система резервного копирования (Backup System)*** — резервное копирование среды ETL для 
восстановления, перезапуска и архивирования.

**Подсистема 24**: ***Восстановление и перезапуск (Recovery And Restart)*** — процессы восстановления среды ETL или 
перезапуска процесса в случае сбоя.

**Подсистема 25**: ***Управление версиями (Version Control)*** — создание снимков для архивирования и восстановления 
всей логики и метаданных конвейера ETL.

**Подсистема 26**: ***Перенос версий (Migration Version)*** — перенос полной версии конвейера ETL из режима разработки 
в тестовый режим и, наконец, в рабочий режим.

**Подсистема 27**: ***Монитор рабочего процесса (Workflow Monitor)*** — обеспечивает эффективную работу процессов ETL 
и своевременную загрузку склада.

**Подсистема 28**: ***Сортировка (Sorting)*** — выполняет фундаментальную роль высокопроизводительной ETL-обработки.

**Подсистема 29**: ***Происхождение и зависимости (Lineage And Dependency)*** — определяет источник элемента данных и 
все промежуточные местоположения и преобразования для этого элемента данных или, наоборот, начинается с конкретного 
элемента данных в исходной таблице и показывает все действия, выполненные с этим элементом данных.

**Подсистема 30**: ***Эскалация проблем (Problem Escalation)*** — вспомогательная структура, которая переводит проблемы 
ETL на соответствующие уровни для решения.

**Подсистема 31**: ******

**Подсистема 32**: ******

**Подсистема 33**: ******

**Подсистема 34**: ******