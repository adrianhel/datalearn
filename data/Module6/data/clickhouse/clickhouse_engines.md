## 6.2.5 Установка ClickHouse

### [Назад к ClickHouse ⤶](/data/Module6/data/clickhouse.md)

В **ClickHouse** существует множество движков таблиц, которые можно классифицировать по следующим признакам:
- По способу хранения: **постоянные** и **временные** таблицы.  
- По назначению: **основные** (для хранения пользовательских данных), **вспомогательные** (для интеграции, агрегации, 
буферизации и т.п.).  
- По поддерживаемым операциям: **модифицируемые** (поддерживают `INSERT`, `UPDATE`, `DELETE`), **только для чтения** 
(например, `VIEW`, `EXTERNAL`).  

## Основные типы таблиц
### 1. MergeTree
**MergeTree** — основной и наиболее гибкий механизм хранения, обеспечивающий:  
- Высокую скорость вставки данных.  
- Поддержку партиционирования (разделение данных на независимые части по указанному ключу).  
- Поддержку сортировки по ключу _(primary key)_.  
- Вторичные индексы _(skipping indices)_.  
- Фоновую агрегацию и очистку данных.  

#### Производные движки  
- **ReplacingMergeTree** — хранит только одну актуальную версию строки по ключу замены.  
- **SummingMergeTree** — осуществляет агрегацию (суммирование) по выбранным колонкам при слиянии данных.  
- **AggregatingMergeTree** — поддерживает хранение агрегированных данных с пользовательскими агрегационными функциями.  
- **CollapsingMergeTree** — поддерживает логику хранения событий с парой флагов (например, для учета отмен).  
- **VersionedCollapsingMergeTree** — вариант **CollapsingMergeTree** с поддержкой версионности строк.  
- **GraphiteMergeTree** — специализирован для хранения временных рядов графит-данных.  

#### Пример создания таблицы MergeTree

```sql
CREATE TABLE visits
(
    UserID UInt64,
    VisitDate Date,
    Page String
)
ENGINE = MergeTree
PARTITION BY toYYYYMM(VisitDate)
ORDER BY (UserID, VisitDate);
```